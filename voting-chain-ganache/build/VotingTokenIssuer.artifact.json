{
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "idHash",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "token",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint64",
          "name": "expiresAt",
          "type": "uint64"
        }
      ],
      "name": "TokenIssued",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "idHash",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "token",
          "type": "bytes32"
        }
      ],
      "name": "TokenUsed",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "idHash",
          "type": "bytes32"
        },
        {
          "internalType": "uint64",
          "name": "ttlSeconds",
          "type": "uint64"
        }
      ],
      "name": "issueToken",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "token",
          "type": "bytes32"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "idHash",
          "type": "bytes32"
        }
      ],
      "name": "markUsed",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "nonce",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "tokens",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "token",
          "type": "bytes32"
        },
        {
          "internalType": "uint64",
          "name": "expiresAt",
          "type": "uint64"
        },
        {
          "internalType": "bool",
          "name": "used",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "idHash",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "token",
          "type": "bytes32"
        }
      ],
      "name": "validateToken",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x6080604052348015600e575f5ffd5b50335f5f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550610d618061005b5f395ff3fe608060405234801561000f575f5ffd5b5060043610610060575f3560e01c806323fe133c1461006457806375107610146100945780638da5cb5b146100c4578063904194a3146100e2578063affed0e014610114578063e21e9e0e14610132575b5f5ffd5b61007e600480360381019061007991906107b6565b61014e565b60405161008b9190610803565b60405180910390f35b6100ae60048036038101906100a9919061081c565b6103fc565b6040516100bb9190610874565b60405180910390f35b6100cc6104d7565b6040516100d991906108cc565b60405180910390f35b6100fc60048036038101906100f791906108e5565b6104fb565b60405161010b9392919061091f565b60405180910390f35b61011c610541565b604051610129919061096c565b60405180910390f35b61014c600480360381019061014791906108e5565b610547565b005b5f5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146101dd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101d4906109df565b60405180910390fd5b5f60025f8581526020019081526020015f206040518060600160405290815f8201548152602001600182015f9054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160089054906101000a900460ff16151515158152505090505f5f1b815f0151146102bf575f816020015167ffffffffffffffff164211905081604001518061027e5750805b6102bd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102b490610a47565b60405180910390fd5b505b5f8367ffffffffffffffff16426102d69190610a92565b90508460015f8154809291906102eb90610ac5565b919050556001436102fc9190610b0c565b40426040516020016103119493929190610b7f565b60405160208183030381529060405280519060200120925060405180606001604052808481526020018267ffffffffffffffff1681526020015f151581525060025f8781526020019081526020015f205f820151815f01556020820151816001015f6101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555060408201518160010160086101000a81548160ff021916908315150217905550905050847f9d8ef593f265a59a5c69e67d7b97b0df3a9c285254d3f94936a1bd36a55d3c0384836040516103ec929190610bcc565b60405180910390a2505092915050565b5f5f60025f8581526020019081526020015f206040518060600160405290815f8201548152602001600182015f9054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160089054906101000a900460ff16151515158152505090505f5f1b815f015103610486575f9150506104d1565b82815f015114610499575f9150506104d1565b8060400151156104ac575f9150506104d1565b806020015167ffffffffffffffff164211156104cb575f9150506104d1565b60019150505b92915050565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6002602052805f5260405f205f91509050805f015490806001015f9054906101000a900467ffffffffffffffff16908060010160089054906101000a900460ff16905083565b60015481565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146105d5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105cc906109df565b60405180910390fd5b5f60025f8381526020019081526020015f2090505f5f1b815f015403610630576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161062790610c3d565b60405180910390fd5b8060010160089054906101000a900460ff1615610682576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161067990610ca5565b60405180910390fd5b806001015f9054906101000a900467ffffffffffffffff1667ffffffffffffffff164211156106e6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106dd90610d0d565b60405180910390fd5b60018160010160086101000a81548160ff021916908315150217905550817f2a3b67ae213132d53a680a68d9c04b8f82a57e89393ee1f67ce69f6c675583a2825f01546040516107369190610803565b60405180910390a25050565b5f5ffd5b5f819050919050565b61075881610746565b8114610762575f5ffd5b50565b5f813590506107738161074f565b92915050565b5f67ffffffffffffffff82169050919050565b61079581610779565b811461079f575f5ffd5b50565b5f813590506107b08161078c565b92915050565b5f5f604083850312156107cc576107cb610742565b5b5f6107d985828601610765565b92505060206107ea858286016107a2565b9150509250929050565b6107fd81610746565b82525050565b5f6020820190506108165f8301846107f4565b92915050565b5f5f6040838503121561083257610831610742565b5b5f61083f85828601610765565b925050602061085085828601610765565b9150509250929050565b5f8115159050919050565b61086e8161085a565b82525050565b5f6020820190506108875f830184610865565b92915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6108b68261088d565b9050919050565b6108c6816108ac565b82525050565b5f6020820190506108df5f8301846108bd565b92915050565b5f602082840312156108fa576108f9610742565b5b5f61090784828501610765565b91505092915050565b61091981610779565b82525050565b5f6060820190506109325f8301866107f4565b61093f6020830185610910565b61094c6040830184610865565b949350505050565b5f819050919050565b61096681610954565b82525050565b5f60208201905061097f5f83018461095d565b92915050565b5f82825260208201905092915050565b7f4f6e6c79206f776e6572000000000000000000000000000000000000000000005f82015250565b5f6109c9600a83610985565b91506109d482610995565b602082019050919050565b5f6020820190508181035f8301526109f6816109bd565b9050919050565b7f41637469766520746f6b656e20657869737473000000000000000000000000005f82015250565b5f610a31601383610985565b9150610a3c826109fd565b602082019050919050565b5f6020820190508181035f830152610a5e81610a25565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610a9c82610954565b9150610aa783610954565b9250828201905080821115610abf57610abe610a65565b5b92915050565b5f610acf82610954565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203610b0157610b00610a65565b5b600182019050919050565b5f610b1682610954565b9150610b2183610954565b9250828203905081811115610b3957610b38610a65565b5b92915050565b5f819050919050565b610b59610b5482610746565b610b3f565b82525050565b5f819050919050565b610b79610b7482610954565b610b5f565b82525050565b5f610b8a8287610b48565b602082019150610b9a8286610b68565b602082019150610baa8285610b48565b602082019150610bba8284610b68565b60208201915081905095945050505050565b5f604082019050610bdf5f8301856107f4565b610bec6020830184610910565b9392505050565b7f4e6f20746f6b656e0000000000000000000000000000000000000000000000005f82015250565b5f610c27600883610985565b9150610c3282610bf3565b602082019050919050565b5f6020820190508181035f830152610c5481610c1b565b9050919050565b7f416c7265616479207573656400000000000000000000000000000000000000005f82015250565b5f610c8f600c83610985565b9150610c9a82610c5b565b602082019050919050565b5f6020820190508181035f830152610cbc81610c83565b9050919050565b7f45787069726564000000000000000000000000000000000000000000000000005f82015250565b5f610cf7600783610985565b9150610d0282610cc3565b602082019050919050565b5f6020820190508181035f830152610d2481610ceb565b905091905056fea2646970667358221220caf83c109301e8a4382b10119b6479476423e93f05097806f371ae91a47147d464736f6c63430008220033"
}
{
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "name_en",
          "type": "string"
        }
      ],
      "name": "CandidateAdded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "idHash",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "token",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint64",
          "name": "expiresAt",
          "type": "uint64"
        }
      ],
      "name": "TokenIssued",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "candidateId",
          "type": "uint256"
        }
      ],
      "name": "VoteCast",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "name_en",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "name_kh",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "party",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "photo_url",
          "type": "string"
        }
      ],
      "name": "addCandidate",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "candidateCount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        }
      ],
      "name": "getCandidate",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "idHash",
          "type": "bytes32"
        },
        {
          "internalType": "uint64",
          "name": "ttlSeconds",
          "type": "uint64"
        }
      ],
      "name": "issueToken",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "token",
          "type": "bytes32"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "nonce",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "tokens",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "token",
          "type": "bytes32"
        },
        {
          "internalType": "uint64",
          "name": "expiresAt",
          "type": "uint64"
        },
        {
          "internalType": "bool",
          "name": "used",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "idHash",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "token",
          "type": "bytes32"
        }
      ],
      "name": "validateToken",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "idHash",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "token",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "candidateId",
          "type": "uint256"
        }
      ],
      "name": "voteWithToken",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x6080604052348015600e575f5ffd5b50335f5f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550611aa08061005b5f395ff3fe608060405234801561000f575f5ffd5b5060043610610091575f3560e01c80638da5cb5b116100645780638da5cb5b146101475780638e79bc1714610165578063904194a314610181578063a9a981a3146101b3578063affed0e0146101d157610091565b806323fe133c1461009557806335b8e820146100c557806342b03cc9146100fb5780637510761014610117575b5f5ffd5b6100af60048036038101906100aa9190610e54565b6101ef565b6040516100bc9190610ea1565b60405180910390f35b6100df60048036038101906100da9190610eed565b61049d565b6040516100f29796959493929190610fb1565b60405180910390f35b6101156004803603810190610110919061109b565b61076e565b005b610131600480360381019061012c919061117f565b610a83565b60405161013e91906111bd565b60405180910390f35b61014f610b5e565b60405161015c9190611215565b60405180910390f35b61017f600480360381019061017a919061122e565b610b82565b005b61019b6004803603810190610196919061127e565b610d8a565b6040516101aa939291906112b8565b60405180910390f35b6101bb610dd0565b6040516101c891906112ed565b60405180910390f35b6101d9610dd6565b6040516101e691906112ed565b60405180910390f35b5f5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461027e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161027590611350565b60405180910390fd5b5f60025f8581526020019081526020015f206040518060600160405290815f8201548152602001600182015f9054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160089054906101000a900460ff16151515158152505090505f5f1b815f015114610360575f816020015167ffffffffffffffff164211905081604001518061031f5750805b61035e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610355906113b8565b60405180910390fd5b505b5f8367ffffffffffffffff16426103779190611403565b90508460015f81548092919061038c90611436565b9190505560014361039d919061147d565b40426040516020016103b294939291906114f0565b60405160208183030381529060405280519060200120925060405180606001604052808481526020018267ffffffffffffffff1681526020015f151581525060025f8781526020019081526020015f205f820151815f01556020820151816001015f6101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555060408201518160010160086101000a81548160ff021916908315150217905550905050847f9d8ef593f265a59a5c69e67d7b97b0df3a9c285254d3f94936a1bd36a55d3c03848360405161048d92919061153d565b60405180910390a2505092915050565b5f6060806060805f5f5f60045f8a81526020019081526020015f206040518060e00160405290815f82015481526020016001820180546104dc90611591565b80601f016020809104026020016040519081016040528092919081815260200182805461050890611591565b80156105535780601f1061052a57610100808354040283529160200191610553565b820191905f5260205f20905b81548152906001019060200180831161053657829003601f168201915b5050505050815260200160028201805461056c90611591565b80601f016020809104026020016040519081016040528092919081815260200182805461059890611591565b80156105e35780601f106105ba576101008083540402835291602001916105e3565b820191905f5260205f20905b8154815290600101906020018083116105c657829003601f168201915b505050505081526020016003820180546105fc90611591565b80601f016020809104026020016040519081016040528092919081815260200182805461062890611591565b80156106735780601f1061064a57610100808354040283529160200191610673565b820191905f5260205f20905b81548152906001019060200180831161065657829003601f168201915b5050505050815260200160048201805461068c90611591565b80601f01602080910402602001604051908101604052809291908181526020018280546106b890611591565b80156107035780601f106106da57610100808354040283529160200191610703565b820191905f5260205f20905b8154815290600101906020018083116106e657829003601f168201915b5050505050815260200160058201548152602001600682015f9054906101000a900460ff1615151515815250509050805f015181602001518260400151836060015184608001518560a001518660c00151975097509750975097509750975050919395979092949650565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146107fc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107f390611350565b60405180910390fd5b5f8888905011610841576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108389061160b565b60405180910390fd5b600160035f8282546108539190611403565b925050819055506040518060e00160405280600354815260200189898080601f0160208091040260200160405190810160405280939291908181526020018383808284375f81840152601f19601f82011690508083019250505050505050815260200187878080601f0160208091040260200160405190810160405280939291908181526020018383808284375f81840152601f19601f82011690508083019250505050505050815260200185858080601f0160208091040260200160405190810160405280939291908181526020018383808284375f81840152601f19601f82011690508083019250505050505050815260200183838080601f0160208091040260200160405190810160405280939291908181526020018383808284375f81840152601f19601f8201169050808301925050505050505081526020015f81526020016001151581525060045f60035481526020019081526020015f205f820151815f015560208201518160010190816109ce9190611807565b5060408201518160020190816109e49190611807565b5060608201518160030190816109fa9190611807565b506080820151816004019081610a109190611807565b5060a0820151816005015560c0820151816006015f6101000a81548160ff0219169083151502179055509050506003547fe83b2a43e7e82d975c8a0a6d2f045153c869e111136a34d1889ab7b598e396a38989604051610a71929190611910565b60405180910390a25050505050505050565b5f5f60025f8581526020019081526020015f206040518060600160405290815f8201548152602001600182015f9054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160089054906101000a900460ff16151515158152505090505f5f1b815f015103610b0d575f915050610b58565b82815f015114610b20575f915050610b58565b806040015115610b33575f915050610b58565b806020015167ffffffffffffffff16421115610b52575f915050610b58565b60019150505b92915050565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610c10576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c0790611350565b60405180910390fd5b60018110158015610c2357506003548111155b610c62576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c599061197c565b60405180910390fd5b5f60045f8381526020019081526020015f209050806006015f9054906101000a900460ff16610cc6576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cbd906119e4565b60405180910390fd5b610cd08484610a83565b610d0f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d0690611a4c565b60405180910390fd5b600160025f8681526020019081526020015f2060010160086101000a81548160ff0219169083151502179055506001816005015f828254610d509190611403565b92505081905550817f9593d9bd30eff4872ec3bab10360ad82eaac80651801e68f47f0674c38415c3d60405160405180910390a250505050565b6002602052805f5260405f205f91509050805f015490806001015f9054906101000a900467ffffffffffffffff16908060010160089054906101000a900460ff16905083565b60035481565b60015481565b5f5ffd5b5f5ffd5b5f819050919050565b610df681610de4565b8114610e00575f5ffd5b50565b5f81359050610e1181610ded565b92915050565b5f67ffffffffffffffff82169050919050565b610e3381610e17565b8114610e3d575f5ffd5b50565b5f81359050610e4e81610e2a565b92915050565b5f5f60408385031215610e6a57610e69610ddc565b5b5f610e7785828601610e03565b9250506020610e8885828601610e40565b9150509250929050565b610e9b81610de4565b82525050565b5f602082019050610eb45f830184610e92565b92915050565b5f819050919050565b610ecc81610eba565b8114610ed6575f5ffd5b50565b5f81359050610ee781610ec3565b92915050565b5f60208284031215610f0257610f01610ddc565b5b5f610f0f84828501610ed9565b91505092915050565b610f2181610eba565b82525050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f610f6982610f27565b610f738185610f31565b9350610f83818560208601610f41565b610f8c81610f4f565b840191505092915050565b5f8115159050919050565b610fab81610f97565b82525050565b5f60e082019050610fc45f83018a610f18565b8181036020830152610fd68189610f5f565b90508181036040830152610fea8188610f5f565b90508181036060830152610ffe8187610f5f565b905081810360808301526110128186610f5f565b905061102160a0830185610f18565b61102e60c0830184610fa2565b98975050505050505050565b5f5ffd5b5f5ffd5b5f5ffd5b5f5f83601f84011261105b5761105a61103a565b5b8235905067ffffffffffffffff8111156110785761107761103e565b5b60208301915083600182028301111561109457611093611042565b5b9250929050565b5f5f5f5f5f5f5f5f6080898b0312156110b7576110b6610ddc565b5b5f89013567ffffffffffffffff8111156110d4576110d3610de0565b5b6110e08b828c01611046565b9850985050602089013567ffffffffffffffff81111561110357611102610de0565b5b61110f8b828c01611046565b9650965050604089013567ffffffffffffffff81111561113257611131610de0565b5b61113e8b828c01611046565b9450945050606089013567ffffffffffffffff81111561116157611160610de0565b5b61116d8b828c01611046565b92509250509295985092959890939650565b5f5f6040838503121561119557611194610ddc565b5b5f6111a285828601610e03565b92505060206111b385828601610e03565b9150509250929050565b5f6020820190506111d05f830184610fa2565b92915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6111ff826111d6565b9050919050565b61120f816111f5565b82525050565b5f6020820190506112285f830184611206565b92915050565b5f5f5f6060848603121561124557611244610ddc565b5b5f61125286828701610e03565b935050602061126386828701610e03565b925050604061127486828701610ed9565b9150509250925092565b5f6020828403121561129357611292610ddc565b5b5f6112a084828501610e03565b91505092915050565b6112b281610e17565b82525050565b5f6060820190506112cb5f830186610e92565b6112d860208301856112a9565b6112e56040830184610fa2565b949350505050565b5f6020820190506113005f830184610f18565b92915050565b7f4f6e6c79206f776e6572000000000000000000000000000000000000000000005f82015250565b5f61133a600a83610f31565b915061134582611306565b602082019050919050565b5f6020820190508181035f8301526113678161132e565b9050919050565b7f41637469766520746f6b656e20657869737473000000000000000000000000005f82015250565b5f6113a2601383610f31565b91506113ad8261136e565b602082019050919050565b5f6020820190508181035f8301526113cf81611396565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f61140d82610eba565b915061141883610eba565b92508282019050808211156114305761142f6113d6565b5b92915050565b5f61144082610eba565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203611472576114716113d6565b5b600182019050919050565b5f61148782610eba565b915061149283610eba565b92508282039050818111156114aa576114a96113d6565b5b92915050565b5f819050919050565b6114ca6114c582610de4565b6114b0565b82525050565b5f819050919050565b6114ea6114e582610eba565b6114d0565b82525050565b5f6114fb82876114b9565b60208201915061150b82866114d9565b60208201915061151b82856114b9565b60208201915061152b82846114d9565b60208201915081905095945050505050565b5f6040820190506115505f830185610e92565b61155d60208301846112a9565b9392505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f60028204905060018216806115a857607f821691505b6020821081036115bb576115ba611564565b5b50919050565b7f6e616d655f656e207265717569726564000000000000000000000000000000005f82015250565b5f6115f5601083610f31565b9150611600826115c1565b602082019050919050565b5f6020820190508181035f830152611622816115e9565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026116b27fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82611677565b6116bc8683611677565b95508019841693508086168417925050509392505050565b5f819050919050565b5f6116f76116f26116ed84610eba565b6116d4565b610eba565b9050919050565b5f819050919050565b611710836116dd565b61172461171c826116fe565b848454611683565b825550505050565b5f5f905090565b61173b61172c565b611746818484611707565b505050565b5f5b8281101561176c576117615f828401611733565b60018101905061174d565b505050565b601f8211156117bf57828211156117be5761178b81611656565b61179483611668565b61179d85611668565b60208610156117aa575f90505b8083016117b98284038261174b565b505050505b5b505050565b5f82821c905092915050565b5f6117df5f19846008026117c4565b1980831691505092915050565b5f6117f783836117d0565b9150826002028217905092915050565b61181082610f27565b67ffffffffffffffff81111561182957611828611629565b5b6118338254611591565b61183e828285611771565b5f60209050601f83116001811461186f575f841561185d578287015190505b61186785826117ec565b8655506118ce565b601f19841661187d86611656565b5f5b828110156118a45784890151825560018201915060208501945060208101905061187f565b868310156118c157848901516118bd601f8916826117d0565b8355505b6001600288020188555050505b505050505050565b828183375f83830152505050565b5f6118ef8385610f31565b93506118fc8385846118d6565b61190583610f4f565b840190509392505050565b5f6020820190508181035f8301526119298184866118e4565b90509392505050565b7f496e76616c69642063616e6469646174650000000000000000000000000000005f82015250565b5f611966601183610f31565b915061197182611932565b602082019050919050565b5f6020820190508181035f8301526119938161195a565b9050919050565b7f43616e64696461746520696e61637469766500000000000000000000000000005f82015250565b5f6119ce601283610f31565b91506119d98261199a565b602082019050919050565b5f6020820190508181035f8301526119fb816119c2565b9050919050565b7f496e76616c69642f657870697265642f7573656420746f6b656e0000000000005f82015250565b5f611a36601a83610f31565b9150611a4182611a02565b602082019050919050565b5f6020820190508181035f830152611a6381611a2a565b905091905056fea2646970667358221220043b8bec5fa7c643de4270d0e4e27f36562c04c2efdd83c0a483daa57ad0e7f164736f6c63430008220033"
}